import { strictEqual } from 'assert'

// うち、XCRと狼牙棒の変更が撤回されているため、撤回後のステータスを保証すべき
// https://steamcommunity.com/games/1049590/announcements/detail/2942506324984421741

import { createFinder } from '../src'
describe('expect applied 0.23.2 patch buff/nerf stats', () => {
  const finder = createFinder()
  finder.setLang('ja')

  it('0.23.2を返すべき', () => {
    strictEqual(finder.patch, '0.23.2')
  })
  it('weapons', () => {
    strictEqual(finder.findByLocaled('魔弾の射手').getStats().attack, 35)
    strictEqual(finder.findByLocaled('パラシュ').getStats().movementSpeed, 0.1)
    strictEqual(finder.findByLocaled('XCR').getStats().hp, 350)
    strictEqual(finder.findByLocaled('狼牙棒').getStats().attack, 55)
    strictEqual(finder.findByLocaled('狼牙棒').getStats().skillDamage, 31)
    strictEqual(finder.findByLocaled('シャーパー').getStats().attack, 27)
    strictEqual(finder.findByLocaled('法輪').getStats().attack, 38)
    strictEqual(finder.findByLocaled('梅花の手裏剣').getStats().attack, 17)
    strictEqual(finder.findByLocaled('NTW-20').getStats().skillDamage, 24)
    strictEqual(finder.findByLocaled('斜射星光').getStats().skillDamage, 33)
    strictEqual(finder.findByLocaled('戦斧').getStats().attack, 85)
    strictEqual(finder.findByLocaled('マイソック').getStats().attack, 58)
    strictEqual(finder.findByLocaled('スーパーボール').getStats().attack, 42)
    strictEqual(finder.findByLocaled('ルテニウムの玉').getStats().skillDamage, 22)
    strictEqual(finder.findByLocaled('コンポジットボウ').getStats().attack, 25)
    strictEqual(finder.findByLocaled('霹靂弓').getStats().attack, 25)
    strictEqual(finder.findByLocaled('火矢').getStats().attack, 25)
    strictEqual(finder.findByLocaled('黄昏の鎧').getStats().hp, 400)
    strictEqual(finder.findByLocaled('炎のドレス').getStats().defense, 30)
    strictEqual(finder.findByLocaled('EODスーツ').getStats().defense, 20)
    strictEqual(finder.findByLocaled('カバナ').getStats().skillDamage, 22)
    strictEqual(finder.findByLocaled('聖騎士の鎧').getStats().defense, 38)
    strictEqual(finder.findByLocaled('聖騎士の鎧').getStats().hpRegenIncrease, 150)
    strictEqual(finder.findByLocaled('ロッカージャケット').getStats().movementSpeedNotCombat, 0.1)
    strictEqual(finder.findByLocaled('騎士団長の兜').getStats().defense, 24)
    strictEqual(finder.findByLocaled('水晶ティアラ').getStats().criticalChance, 20)
    strictEqual(finder.findByLocaled('ソードストッパー').getStats().defense, 36)
    strictEqual(finder.findByLocaled('レーダー').getStats().criticalChance, 24)
    strictEqual(finder.findByLocaled('ドラウプニル').getStats().skillDamage, 17)
    strictEqual(finder.findByLocaled('ブケパロス').getStats().criticalChance, 15)
    strictEqual(finder.findByLocaled('EODシューズ').getStats().defense, 26)
    strictEqual(finder.findByLocaled('グレイシャルシューズ').getStats().movementSpeed, 0.25)
    strictEqual(finder.findByLocaled('グレイシャルシューズ').getStats().movementSpeedNotCombat, 0.4)
    strictEqual(finder.findByLocaled('博士の箱').getStats().hp, 380)

    strictEqual(finder.getAreaCount(finder.____('池'), finder.____('ネズミ捕り')), 5)
    strictEqual(finder.getAreaCount(finder.____('池'), finder.____('原石')), 10)
    strictEqual(finder.getAreaCount(finder.____('森'), finder.____('原石')), 10)
    strictEqual(finder.getAreaCount(finder.____('森'), finder.____('火縄銃')), 2)
    strictEqual(finder.getAreaCount(finder.____('浜辺'), finder.____('原石')), 9)
    strictEqual(finder.getAreaCount(finder.____('浜辺'), finder.____('ネズミ捕り')), 3)
    strictEqual(finder.getAreaCount(finder.____('路地裏'), finder.____('金槌')), 10)
    strictEqual(finder.getAreaCount(finder.____('路地裏'), finder.____('針')), 6)
    strictEqual(finder.getAreaCount(finder.____('路地裏'), finder.____('双眼鏡')), 6)
  })

  describe.skip('src/dict更新用 パッチ実行時だけ実行する', () => {
    it('アイテム', () => {
      finder.patchStats('魔弾の射手', 'attack', 35)
      finder.patchStats('パラシュ', 'movementSpeed', 0.1)
      finder.patchStats('XCR', 'hp', 350)
      finder.patchStats('狼牙棒', 'attack', 55)
      finder.patchStats('狼牙棒', 'skillDamage', 31)
      finder.patchStats('シャーパー', 'attack', 27)
      finder.patchStats('法輪', 'attack', 38)
      finder.patchStats('梅花の手裏剣', 'attack', 17)
      finder.patchStats('NTW-20', 'skillDamage', 24)
      finder.patchStats('斜射星光', 'skillDamage', 33)
      finder.patchStats('戦斧', 'attack', 85)
      finder.patchStats('マイソック', 'attack', 58)
      finder.patchStats('スーパーボール', 'attack', 42)
      finder.patchStats('ルテニウムの玉', 'skillDamage', 22)
      finder.patchStats('コンポジットボウ', 'attack', 25)
      finder.patchStats('霹靂弓', 'attack', 25)
      finder.patchStats('火矢', 'attack', 25)
      finder.patchStats('黄昏の鎧', 'hp', 400)
      finder.patchStats('炎のドレス', 'defense', 30)
      finder.patchStats('EODスーツ', 'defense', 20)
      finder.patchStats('カバナ', 'skillDamage', 22)
      finder.patchStats('聖騎士の鎧', 'defense', 38)
      finder.patchStats('聖騎士の鎧', 'hpRegenIncrease', 150)
      finder.patchStats('ロッカージャケット', 'movementSpeedNotCombat', 0.1)
      finder.patchStats('騎士団長の兜', 'defense', 24)
      finder.patchStats('水晶ティアラ', 'criticalChance', 20)
      finder.patchStats('ソードストッパー', 'defense', 36)
      finder.patchStats('レーダー', 'criticalChance', 24)
      finder.patchStats('ドラウプニル', 'skillDamage', 17)
      finder.patchStats('ブケパロス', 'criticalChance', 15)
      finder.patchStats('EODシューズ', 'defense', 26)
      finder.patchStats('グレイシャルシューズ', 'movementSpeed', 0.25)
      finder.patchStats('グレイシャルシューズ', 'movementSpeedNotCombat', 0.4)
      finder.patchStats('博士の箱', 'hp', 380)

      require('fs').writeFileSync('0.23.2.dictItems.json', JSON.stringify(finder.getItemArray()))
    })
    it('エリア個数', () => {
      finder.patchAreaCount('池', 'ネズミ捕り', 5)
      finder.patchAreaCount('池', '原石', 10)
      finder.patchAreaCount('森', '原石', 10)
      finder.patchAreaCount('森', '火縄銃', 2)
      finder.patchAreaCount('浜辺', '原石', 9)
      finder.patchAreaCount('浜辺', 'ネズミ捕り', 3)
      finder.patchAreaCount('路地裏', '金槌', 10)
      finder.patchAreaCount('路地裏', '針', 6)
      finder.patchAreaCount('路地裏', '双眼鏡', 6)

      require('fs').writeFileSync('0.23.2.dictArea.json', JSON.stringify(finder.getAreaArray()))
    })
  })
})
